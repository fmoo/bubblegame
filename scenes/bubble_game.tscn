[gd_scene load_steps=50 format=3 uid="uid://borggvjowbqn2"]

[ext_resource type="Script" path="res://scripts/BubbleGame.cs" id="1_axaqe"]
[ext_resource type="PackedScene" uid="uid://bpnitaatb3oe3" path="res://scenes/pin_joint.tscn" id="2_dakla"]
[ext_resource type="Script" path="res://scripts/BubbleGun.cs" id="2_t6f7g"]
[ext_resource type="Texture2D" uid="uid://dugmk8ouwtnds" path="res://sprites/bubble_blue.png" id="2_yx0xx"]
[ext_resource type="Texture2D" uid="uid://bom4u37bst1wq" path="res://sprites/bubble_green.png" id="3_dsvbh"]
[ext_resource type="PackedScene" uid="uid://w1kv4tagcac8" path="res://scenes/bubble.tscn" id="3_gb0c4"]
[ext_resource type="Script" path="res://scripts/BubbleQueue.cs" id="3_knjol"]
[ext_resource type="Script" path="res://scripts/VillainBubble.cs" id="3_mo6oh"]
[ext_resource type="Texture2D" uid="uid://bjlawj0jajb3l" path="res://sprites/bubble_orange.png" id="4_dqnc1"]
[ext_resource type="PackedScene" uid="uid://b5soh8b80t7ya" path="res://scenes/bubble_sprite.tscn" id="4_otc38"]
[ext_resource type="Texture2D" uid="uid://c8m34hie1uyjv" path="res://sprites/bubble_pink.png" id="5_eiynx"]
[ext_resource type="PhysicsMaterial" uid="uid://5gbmiagtsmip" path="res://physics/bouncy.tres" id="6_4ubpa"]
[ext_resource type="PackedScene" uid="uid://dqaenifftll1r" path="res://scenes/villain_pin_joint.tscn" id="7_5koiv"]
[ext_resource type="Script" path="res://scripts/input/DebugMode.cs" id="7_7wqd8"]
[ext_resource type="FontFile" uid="uid://cut5thov7tnj" path="res://fonts/ChevyRay - Chocolate Mono.ttf" id="7_ef742"]
[ext_resource type="AudioStream" uid="uid://cb4ipcqc0bnok" path="res://sfx/shoot.wav" id="7_onkte"]
[ext_resource type="Texture2D" uid="uid://be53u2bn2bl10" path="res://sprites/mockup_track.png" id="7_uw36n"]
[ext_resource type="Script" path="res://scripts/Audio.cs" id="7_wso5g"]
[ext_resource type="Script" path="res://scripts/input/InitialControlScheme.cs" id="8_5o3ur"]
[ext_resource type="AudioStream" uid="uid://couc3qpkfeh3c" path="res://sfx/pop.wav" id="8_j1bko"]
[ext_resource type="Script" path="res://scripts/RenderScore.cs" id="8_n7kaq"]
[ext_resource type="AudioStream" uid="uid://cdq000tbps6w5" path="res://sfx/grow.wav" id="9_gumm6"]
[ext_resource type="Script" path="res://scripts/input/SimpleShoot.cs" id="9_nhaw1"]
[ext_resource type="AudioStream" uid="uid://b7xmnqupx3g6t" path="res://sfx/shrink.wav" id="10_qkbjv"]
[ext_resource type="Script" path="res://scripts/input/TwinstickInstantControls.cs" id="10_sqvxt"]
[ext_resource type="AudioStream" uid="uid://biib8kk4q7p7q" path="res://sfx/gameover.wav" id="11_4mftm"]
[ext_resource type="Texture2D" uid="uid://8e06rc2smdp8" path="res://sprites/gun.png" id="13_l8d0c"]
[ext_resource type="Texture2D" uid="uid://bxpexe12qf7nr" path="res://sprites/gun_barrel.png" id="16_0qeqh"]
[ext_resource type="Script" path="res://scripts/input/MouseControls.cs" id="17_8g50q"]
[ext_resource type="Texture2D" uid="uid://dqedr4oxf7pei" path="res://sprites/down-arrow.png" id="18_7y84i"]
[ext_resource type="Shader" path="res://shaders/background.gdshader" id="20_vleso"]
[ext_resource type="Texture2D" uid="uid://b6bc8bmh3lltv" path="res://sprites/bg.png" id="21_elrbj"]
[ext_resource type="Texture2D" uid="uid://dv7m7b346fvki" path="res://sprites/inner_bubble.png" id="28_mcajo"]
[ext_resource type="Texture2D" uid="uid://xa38v1b4olde" path="res://sprites/inner_bubble_highlight.png" id="29_8m3lp"]
[ext_resource type="Script" path="res://scripts/ScaleTweenFollower.cs" id="29_udvti"]

[sub_resource type="LabelSettings" id="LabelSettings_cavy0"]
line_spacing = 0.0
font = ExtResource("7_ef742")
font_size = 11
outline_size = 2
outline_color = Color(0, 0, 0, 1)

[sub_resource type="ShaderMaterial" id="ShaderMaterial_4libq"]
shader = ExtResource("20_vleso")
shader_parameter/spin_rotation_speed = 2.0
shader_parameter/move_speed = 7.0
shader_parameter/offset = Vector2(0, 0)
shader_parameter/colour_1 = Color(0.890196, 0.698039, 1, 1)
shader_parameter/colour_2 = Color(0, 0.42, 0.706, 1)
shader_parameter/colour_3 = Color(0.118582, 0.118581, 0.118581, 1)
shader_parameter/contrast = 3.5
shader_parameter/lighting = 0.4
shader_parameter/spin_amount = 0.25
shader_parameter/pixel_filter = 200.0
shader_parameter/is_rotating = false

[sub_resource type="Curve2D" id="Curve2D_lbhqn"]
_data = {
"points": PackedVector2Array(0, 0, 0, 0, 244, 283, 0, 0, 0, 0, 245, 283, 0, 0, 0, 0, 274, 280, 0, 0, 0, 0, 301, 271, 0, 0, 0, 0, 324, 257, 0, 0, 0, 0, 343, 240, 0, 0, 0, 0, 358, 223, 0, 0, 0, 0, 372, 201, 0, 0, 0, 0, 380, 174, 0, 0, 0, 0, 383, 146, 0, 0, 0, 0, 383, 145, 0, 0, 0, 0, 383, 144, 0, 0, 0, 0, 380, 116, 0, 0, 0, 0, 372, 89, 0, 0, 0, 0, 359, 68, 0, 0, 0, 0, 344, 51, 0, 0, 0, 0, 324, 33, 0, 0, 0, 0, 301, 19, 0, 0, 0, 0, 274, 10, 0, 0, 0, 0, 245, 5, 0, 0, 0, 0, 244, 5, 0, 0, 0, 0, 243, 5, 0, 0, 0, 0, 214, 10, 0, 0, 0, 0, 187, 19, 0, 0, 0, 0, 164, 33, 0, 0, 0, 0, 144, 51, 0, 0, 0, 0, 130, 67, 0, 0, 0, 0, 116, 89, 0, 0, 0, 0, 108, 116, 0, 0, 0, 0, 105, 144, 0, 0, 0, 0, 105, 145, 0, 0, 0, 0, 105, 146, 0, 0, 0, 0, 108, 174, 0, 0, 0, 0, 116, 201, 0, 0, 0, 0, 129, 222, 0, 0, 0, 0, 144, 239, 0, 0, 0, 0, 164, 257, 0, 0, 0, 0, 187, 271, 0, 0, 0, 0, 214, 280, 0, 0, 0, 0, 243, 283, 0, 0, 0, 0, 244, 283)
}
point_count = 41

[sub_resource type="AtlasTexture" id="AtlasTexture_b0upr"]
atlas = ExtResource("13_l8d0c")
region = Rect2(0, 0, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_3guec"]
atlas = ExtResource("13_l8d0c")
region = Rect2(64, 0, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_q705d"]
atlas = ExtResource("13_l8d0c")
region = Rect2(128, 0, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_dqoip"]
atlas = ExtResource("13_l8d0c")
region = Rect2(192, 0, 64, 64)

[sub_resource type="SpriteFrames" id="SpriteFrames_l5ofx"]
animations = [{
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_b0upr")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_3guec")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_q705d")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_dqoip")
}],
"loop": true,
"name": &"default",
"speed": 10.0
}]

[sub_resource type="PhysicsMaterial" id="PhysicsMaterial_7gmt2"]
rough = true
absorbent = true

[sub_resource type="CircleShape2D" id="CircleShape2D_gnq0l"]
radius = 17.0294

[sub_resource type="WorldBoundaryShape2D" id="WorldBoundaryShape2D_bow63"]
normal = Vector2(1, 0)

[sub_resource type="WorldBoundaryShape2D" id="WorldBoundaryShape2D_mg2jt"]
normal = Vector2(0, 1)

[sub_resource type="WorldBoundaryShape2D" id="WorldBoundaryShape2D_c6phh"]

[sub_resource type="WorldBoundaryShape2D" id="WorldBoundaryShape2D_ishrt"]
normal = Vector2(-1, 0)

[node name="BubbleGame" type="Node2D" node_paths=PackedStringArray("Audio", "BubbleQueue", "Springs", "Bubbles", "VillainBubble", "Player")]
texture_filter = 1
script = ExtResource("1_axaqe")
Audio = NodePath("Audio")
BubbleQueue = NodePath("BubbleQueue")
bubbleColors = Array[Texture2D]([ExtResource("2_yx0xx"), ExtResource("3_dsvbh"), ExtResource("4_dqnc1"), ExtResource("5_eiynx")])
Springs = NodePath("Springs")
Bubbles = NodePath("Bubbles")
VillainBubble = NodePath("VillainBubble")
Player = NodePath("TrackPath/GunFollow2D/Gun")
MinMatchSize = 4
ShrinkBubblePops = 5
GrowBubbleShots = 6
PinJointTemplate = ExtResource("2_dakla")
VillainPinJointTemplate = ExtResource("7_5koiv")
BubbleSprite = ExtResource("4_otc38")

[node name="CanvasLayer" type="CanvasLayer" parent="."]
layer = 0
follow_viewport_enabled = true

[node name="RichTextLabel" type="Label" parent="CanvasLayer"]
texture_filter = 1
anchors_preset = 1
anchor_left = 1.0
anchor_right = 1.0
offset_left = -98.0
offset_top = 16.0
offset_right = -15.0
offset_bottom = 28.0
grow_horizontal = 0
theme_override_colors/font_shadow_color = Color(0, 0, 0, 1)
theme_override_constants/shadow_offset_x = 0
theme_override_constants/shadow_offset_y = 1
theme_override_constants/outline_size = 4
text = "00000100"
label_settings = SubResource("LabelSettings_cavy0")
horizontal_alignment = 2
visible_characters_behavior = 1
script = ExtResource("8_n7kaq")

[node name="Audio" type="Node" parent="." node_paths=PackedStringArray("_Shoot", "_Pop", "_Grow", "_Shrink", "_GameOver")]
script = ExtResource("7_wso5g")
_Shoot = NodePath("Shoot")
_Pop = NodePath("Pop")
_Grow = NodePath("Grow")
_Shrink = NodePath("Shrink")
_GameOver = NodePath("GameOver")

[node name="Shoot" type="AudioStreamPlayer" parent="Audio"]
stream = ExtResource("7_onkte")

[node name="Pop" type="AudioStreamPlayer" parent="Audio"]
stream = ExtResource("8_j1bko")

[node name="Grow" type="AudioStreamPlayer" parent="Audio"]
stream = ExtResource("9_gumm6")

[node name="Shrink" type="AudioStreamPlayer" parent="Audio"]
stream = ExtResource("10_qkbjv")

[node name="GameOver" type="AudioStreamPlayer" parent="Audio"]
stream = ExtResource("11_4mftm")

[node name="ControlSchemes" type="Node2D" parent="."]

[node name="DebugMode" type="Node2D" parent="ControlSchemes"]
script = ExtResource("7_7wqd8")

[node name="KeyboardPressStrafeAim" type="Node2D" parent="ControlSchemes" node_paths=PackedStringArray("MouseControls")]
script = ExtResource("8_5o3ur")
MouseControls = NodePath("../MouseControls")

[node name="SimpleShoot" type="Node2D" parent="ControlSchemes"]
script = ExtResource("9_nhaw1")

[node name="TwinstickInstant" type="Node2D" parent="ControlSchemes"]
visible = false
script = ExtResource("10_sqvxt")

[node name="MouseControls" type="Node2D" parent="ControlSchemes" node_paths=PackedStringArray("moveTargetPath")]
position = Vector2(247, 144)
script = ExtResource("17_8g50q")
moveTargetPath = NodePath("../../TrackPath/MouseAimHover2D")

[node name="ColorRect" type="ColorRect" parent="."]
z_index = -3
material = SubResource("ShaderMaterial_4libq")
offset_right = 512.0
offset_bottom = 288.0

[node name="BG" type="Sprite2D" parent="."]
z_index = -1
texture = ExtResource("21_elrbj")
centered = false

[node name="TrackImage" type="Sprite2D" parent="."]
z_index = -2
texture = ExtResource("7_uw36n")
centered = false

[node name="TrackPath" type="Path2D" parent="."]
curve = SubResource("Curve2D_lbhqn")

[node name="MouseAimHover2D" type="PathFollow2D" parent="TrackPath"]
position = Vector2(244, 283)

[node name="HoverCursor" type="Sprite2D" parent="TrackPath/MouseAimHover2D"]
modulate = Color(1, 1, 1, 0.552941)
position = Vector2(0, -23)
texture = ExtResource("18_7y84i")

[node name="MouseAimClicked2D" type="PathFollow2D" parent="TrackPath"]
visible = false
position = Vector2(244, 283)

[node name="ClickedCursor" type="Sprite2D" parent="TrackPath/MouseAimClicked2D"]
position = Vector2(0, -23)
texture = ExtResource("18_7y84i")

[node name="GunFollow2D" type="PathFollow2D" parent="TrackPath"]
position = Vector2(244, 283)

[node name="Gun" type="Node2D" parent="TrackPath/GunFollow2D" node_paths=PackedStringArray("pathFollow", "animatedBody", "turretSprite", "bubblePreviewSprite", "ActiveMoveTarget")]
script = ExtResource("2_t6f7g")
bubbleScene = ExtResource("3_gb0c4")
pathFollow = NodePath("..")
trackSpeed = 0.2
animatedBody = NodePath("Body")
turretSprite = NodePath("Turret")
bubblePreviewSprite = NodePath("Body/BubbleSprite")
ActiveMoveTarget = NodePath("../../MouseAimClicked2D")

[node name="Body" type="AnimatedSprite2D" parent="TrackPath/GunFollow2D/Gun"]
position = Vector2(0, -15)
sprite_frames = SubResource("SpriteFrames_l5ofx")
frame_progress = 0.795362
speed_scale = 0.0
offset = Vector2(0, -9)

[node name="BubbleSprite" parent="TrackPath/GunFollow2D/Gun/Body" instance=ExtResource("4_otc38")]
z_index = -1
position = Vector2(0, 9)
texture = ExtResource("3_dsvbh")

[node name="Turret" type="Sprite2D" parent="TrackPath/GunFollow2D/Gun"]
position = Vector2(0, -15)
texture = ExtResource("16_0qeqh")
offset = Vector2(1, -9)

[node name="VillainBubble" type="RigidBody2D" parent="." node_paths=PackedStringArray("CollisionShape")]
position = Vector2(247, 144)
physics_material_override = SubResource("PhysicsMaterial_7gmt2")
freeze = true
script = ExtResource("3_mo6oh")
CollisionShape = NodePath("CollisionShape2D")

[node name="BubbleSprite" type="Sprite2D" parent="VillainBubble" node_paths=PackedStringArray("Follow")]
scale = Vector2(0.25, 0.25)
texture = ExtResource("28_mcajo")
script = ExtResource("29_udvti")
Follow = NodePath("../CollisionShape2D")

[node name="Sprite2D" type="Sprite2D" parent="VillainBubble/BubbleSprite"]
texture = ExtResource("29_8m3lp")

[node name="CollisionShape2D" type="CollisionShape2D" parent="VillainBubble"]
position = Vector2(1.19209e-07, -2.38419e-07)
shape = SubResource("CircleShape2D_gnq0l")

[node name="BubbleQueue" type="Node2D" parent="." node_paths=PackedStringArray("bubbleRenders")]
position = Vector2(190, 19)
script = ExtResource("3_knjol")
bubbleRenders = [NodePath("../TrackPath/GunFollow2D/Gun/Body/BubbleSprite"), NodePath("BubbleSprite2"), NodePath("BubbleSprite3")]

[node name="BubbleSprite2" parent="BubbleQueue" instance=ExtResource("4_otc38")]
position = Vector2(173, 245)

[node name="BubbleSprite3" parent="BubbleQueue" instance=ExtResource("4_otc38")]
position = Vector2(192, 225)

[node name="Springs" type="Node2D" parent="."]

[node name="Bubbles" type="Node2D" parent="."]

[node name="Level2" type="Node2D" parent="."]

[node name="BouncyWalls" type="StaticBody2D" parent="Level2"]
position = Vector2(0, 94)
physics_material_override = ExtResource("6_4ubpa")

[node name="CollisionShape2D" type="CollisionShape2D" parent="Level2/BouncyWalls"]
position = Vector2(2, 46)
shape = SubResource("WorldBoundaryShape2D_bow63")

[node name="CollisionShape2D3" type="CollisionShape2D" parent="Level2/BouncyWalls"]
position = Vector2(247, -94)
shape = SubResource("WorldBoundaryShape2D_mg2jt")

[node name="CollisionShape2D4" type="CollisionShape2D" parent="Level2/BouncyWalls"]
position = Vector2(245, 192)
shape = SubResource("WorldBoundaryShape2D_c6phh")

[node name="CollisionShape2D2" type="CollisionShape2D" parent="Level2/BouncyWalls"]
position = Vector2(512, 49)
shape = SubResource("WorldBoundaryShape2D_ishrt")

[connection signal="OnShoot" from="TrackPath/GunFollow2D/Gun" to="." method="_on_shoot_event"]
